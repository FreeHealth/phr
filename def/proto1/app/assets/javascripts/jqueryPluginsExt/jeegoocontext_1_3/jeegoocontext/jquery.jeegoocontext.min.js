(function(E){var H;var B;var A=function(I,J){return{width:I-E(window).width()-E(window).scrollLeft(),height:J-E(window).height()-E(window).scrollTop()}};var C=function(L){if(B[H.activeId].currentHover){var J=L?B[H.activeId].currentHover.nextAll(":not(."+B[H.activeId].separatorClass+"):visible:first"):B[H.activeId].currentHover.prevAll(":not(."+B[H.activeId].separatorClass+"):visible:first");if(J.length==0){J=B[H.activeId].currentHover.parent().find("> li:visible");J=(L?E(J[0]):E(J[J.length-1]))}J.mouseover()}else{var K=E("#"+H.activeId+", #"+H.activeId+" ul").filter(function(){return(E(this).is(":visible")&&E(this).parents(":hidden").length==0)});if(K.length>0){var I=E(K[K.length-1]).find("> li:visible");E(I[(L?0:(I.length-1))]).mouseover()}}};var F=function(){for(cm in B){E(B[cm].allContext).removeClass(H.activeClass)}};var G=function(){if(H.activeId){E("#"+H.activeId).add("#"+H.activeId+" ul").hide()}clearInterval(H.keyUpDown);H.keyUpDownStop=false;if(B[H.activeId]){B[H.activeId].currentHover=null}H.activeId=null;E(document).unbind(".jeegoocontext");E(window).unbind("resize.jeegoocontext")};var D=function(I){if(H.activeId&&B[H.activeId].onHide){if(B[H.activeId].onHide.apply(E("#"+H.activeId),[I,B[H.activeId].context])==false){return false}}F();G()};E.fn.jeegoocontext=function(P,K){if(!H){H={}}if(!B){B={}}if(K&&K.menuClass){H.menuClass=K.menuClass}if(!H.menuClass){H.menuClass="jeegoocontext"}if(K&&K.activeClass){H.activeClass=K.activeClass}if(!H.activeClass){H.activeClass="active"}B[P]=E.extend({hoverClass:"hover",submenuClass:"submenu",separatorClass:"separator",operaEvent:"ctrl+click",fadeIn:200,delay:300,keyDelay:100,widthOverflowOffset:0,heightOverflowOffset:0,submenuLeftOffset:0,submenuTopOffset:0,autoAddSubmenuArrows:true,startLeftOffset:0,startTopOffset:0,keyboard:true},K||{});B[P].allContext=this.selector;E("#"+P).find("li")[B[P].livequery?"expire":"unbind"](".jeegoocontext")[B[P].livequery?"livequery":"bind"]("mouseover.jeegoocontext",function(V){var W=B[P].currentHover=E(this);clearTimeout(B[P].show);clearTimeout(B[P].hide);E("#"+P).find("*").removeClass(B[P].hoverClass);var Q=W.parents("li");W.add(W.find("> *")).add(Q).add(Q.find("> *")).addClass(B[P].hoverClass);var T=true;if(B[P].onHover){if(B[P].onHover.apply(this,[V,B[P].context])==false){T=false}}if(!B[P].proceed){B[P].show=setTimeout(function(){B[P].proceed=true;W.mouseover()},B[P].delay);return false}B[P].proceed=false;W.parent().find("ul").not(W.find("> ul")).hide();if(!T){V.preventDefault();return false}var U=W.find("> ul");if(U.length!=0){var S=W.offset();var R=A((S.left+W.parent().width()+B[P].submenuLeftOffset+U.width()+B[P].widthOverflowOffset),(S.top+B[P].submenuTopOffset+U.height()+B[P].heightOverflowOffset));var Y=U.parent().parent().width();var X=S.top-W.parent().offset().top;U.css({"left":(R.width>0&&!B[P].ignoreWidthOverflow)?(-Y-B[P].submenuLeftOffset+"px"):(Y+B[P].submenuLeftOffset+"px"),"top":(R.height>0&&!B[P].ignoreHeightOverflow)?(X-R.height+B[P].submenuTopOffset)+"px":X+B[P].submenuTopOffset+"px"});U.fadeIn(B[P].fadeIn)}V.stopPropagation()})[B[P].livequery?"livequery":"bind"]("click.jeegoocontext",function(Q){if(B[P].onSelect){if(B[P].onSelect.apply(this,[Q,B[P].context])==false){return false}}G();E(B[P].context).removeClass(H.activeClass);Q.stopPropagation()});var O=document.createElement("div");O.setAttribute("oncontextmenu","");var I=B[P].event;if(I==undefined){I=[null]}else{if(!(I instanceof Array)){I=[I]}}for(var M=0,J=I.length;M<J;++M){var L=I[M];if(!L||L=="contextmenu"){L=(typeof O.oncontextmenu!="undefined")?"contextmenu.jeegoocontext":B[P].operaEvent+".jeegoocontext"}else{L+=".jeegoocontext"}if(L.indexOf("+")!=-1){var N=L.split("+",2);B[P].modifier=N[0]+"Key";L=N[1]}this[B[P].livequery?"livequery":"bind"](L,function(U){if(H.activeId&&B[H.activeId].onHide){B[H.activeId].onHide.apply(E("#"+H.activeId),[U,B[H.activeId].context])}G();F();if(typeof B[P].modifier=="string"&&!U[B[P].modifier]){return }B[P].context=this;var T=E("#"+P);var S,R;if(B[P].openBelowContext){var Q=E(this).offset();S=Q.left;R=Q.top+E(this).outerHeight()}else{S=U.pageX;R=U.pageY}S+=B[P].startLeftOffset;R+=B[P].startTopOffset;var V=A((S+T.width()+B[P].widthOverflowOffset),(R+T.height()+B[P].heightOverflowOffset));if(!B[P].ignoreWidthOverflow&&V.width>0){S-=V.width}if(!B[P].openBelowContext&&!B[P].ignoreHeightOverflow&&V.height>0){R-=V.height}if(B[P].onShow){if(B[P].onShow.apply(T,[U,B[P].context,S,R])==false){return false}}H.activeId=P;E("#"+H.activeId).add("#"+H.activeId+" ul").hide();E(B[P].context).addClass(H.activeClass);T.find("li, li > *").removeClass(B[P].hoverClass);if(B[P].autoAddSubmenuArrows){T.find("li:has(ul)").not(":has(span."+B[P].submenuClass+")").prepend('<span class="'+B[P].submenuClass+'"></span>');T.find("li").not(":has(ul)").find("> span."+B[P].submenuClass).remove()}T.css({"left":S+"px","top":R+"px"}).fadeIn(B[P].fadeIn);if(B[P].openBelowContext){E(window).bind("resize.jeegoocontext",function(){E("#"+P).css("left",E(B[P].context).offset().left+B[P].startLeftOffset+"px")})}E(document).bind("mouseover.jeegoocontext",function(W){if(E(W.relatedTarget).parents("#"+P).length>0){clearTimeout(B[P].show);var X=E(W.relatedTarget).parent().find("li");X.add(X.find("> *")).removeClass(B[P].hoverClass);B[H.activeId].currentHover=null;B[P].hide=setTimeout(function(){X.find("ul").hide();if(B[P].autoHide){D(W)}},B[P].delay)}}).bind("click.jeegoocontext",D);if(B[P].keyboard){E(document).bind("keydown.jeegoocontext",function(Y){switch(Y.which){case 38:if(H.keyUpDownStop){return false}C();H.keyUpDown=setInterval(C,B[H.activeId].keyDelay);H.keyUpDownStop=true;return false;case 39:if(B[H.activeId].currentHover){B[H.activeId].currentHover.find("ul:visible:first li:visible:first").mouseover()}else{var X=E("#"+H.activeId+", #"+H.activeId+" ul:visible");if(X.length>0){E(X[X.length-1]).find(":visible:first").mouseover()}}return false;case 40:if(H.keyUpDownStop){return false}C(true);H.keyUpDown=setInterval(function(){C(true)},B[H.activeId].keyDelay);H.keyUpDownStop=true;return false;case 37:if(B[H.activeId].currentHover){E(B[H.activeId].currentHover.parents("li")[0]).mouseover()}else{var W=E("#"+H.activeId+" li."+B[H.activeId].hoverClass);if(W.length>0){E(W[W.length-1]).mouseover()}}return false;case 13:if(B[H.activeId].currentHover){B[H.activeId].currentHover.click()}else{D(Y)}break;case 27:D(Y);break;default:break}}).bind("keyup.jeegoocontext",function(W){clearInterval(H.keyUpDown);H.keyUpDownStop=false})}return false})}return jQuery};E.fn.nojeegoocontext=function(){this.unbind(".jeegoocontext")}})(jQuery)